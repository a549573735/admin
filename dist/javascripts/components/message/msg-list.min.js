define("",["lib_cmd/vue-cmd","/js_cmd/components/message/msg-paging"],function(require,exports,module){var t=require("lib_cmd/vue-cmd");require("/js_cmd/components/message/msg-paging"),t.component("v-msg-list",{data:function(){return{type:"",top:["行政建议","行政约谈","网络检查","预约"],messgaeList:""}},template:'<div class="row v-table-msg" >                     <div class="col-md-12">                           <div class="block">                                <table class="table table-hover">                                    <thead>                                    <tr>                                        <th class="text-center" style="width: 50px;"></th>                                        <th class="text-left" >头条</th>                                        <th class="text-left" style="width: 30%">来源</th>                                        <th class="text-center"  style="width: 15%;">日期</th>                                    </tr>                                    </thead>                                    <tbody>                                    <tr v-for="item in datalist.content.content" >                                        <td class="text-center"><span class="v-core"></span></td>                                        <td class="text-left v-cont"  :class="!item.isRead?item.class:\'\'" >[{{item.title}}] <a href="javascript:;" :data-isRead="item.isRead+\'\'"  @click="notify($event)" :data-type="item.type"  :data-msg-id="item.message.id"   :data-id="item.id"   > {{item.message.user}}</a></td>                                        <td class="text-left " ><span class="v-msg-content-n">{{item.message.suggestion||item.message.suggestion}}</span> <span class="v-msg-content-r">{{item.message.from}}</span></td>                                        <td class="text-center">                                            {{item.createDate}}                                        </td>                                    </tr>                                    </tbody>                                </table>                            <div>                            <msg-pages :pagelist="datalist.content.page||1"></msg-pages> {{aaa}}                     <div>                <div>',props:["datalist"],methods:{notify:function(t){$(".confirm-msg").html("");var e={title:$(t.target).html(),content:$(t.target).parent().next().find(".v-msg-content-n").html(),date:$(t.target).parent().next().next().html(),company:$(t.target).parent().next().find(".v-msg-content-r").html(),id:$(t.target).attr("data-id"),type:$(t.target).attr("data-type"),msg_id:$(t.target).attr("data-msg-id"),show:!0,isRead:$(t.target).attr("data-isRead")};"false"==e.isRead&&$.get("/api/read/message?id="+e.id).then(function(s){s.success&&(e.isRead="true",$(t.target).attr("data-isRead",!0).parent().attr("class","text-left v-cont"))}),this.$dispatch("send-msg",e)}},events:{"send-page-msg":function(t){var e=this;$.get("/user/messages/list",{page:t-1}).then(function(t){t.content.content.forEach(function(t){switch(t.type){case"INTERVIEW":t.title=e.top[1],t.class="interview-msg";break;case"INSPECT":t.title=e.top[2],t.class="inspect-msg";break;case"APPOINTMENT":t.title=e.top[3],t.class="appointment-msg";break;case"SUGGESTION":t.title=e.top[0],t.class="suggestion-msg"}t.message=JSON.parse(t.message)}),e.datalist=t})}}})});