function getStyle(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null)[t]}function json2css(e){function t(e){var t=e.indexOf("_");if(!(t>0)){for(var o=[],r=0;r<e.length;r++)o.push(e.charAt(r));for(var r=1;r<o.length-1;r++)o[r].charCodeAt(0)>=65&&o[r].charCodeAt(0)<=90&&(o[r]="-"+o[r].toLowerCase());return o.join("")}if(t<e.length-1)return e=e.split("_").join("-")}var o=[];for(var r in e){var n=r;r=t(r),o.push(r+":"+e[n])}return o.join(";")}function CheckCode(e){this.obj=e.obj,this.codesLen=e.codesLen||4}seajs.use("/lib/bootstrap.min.js"),seajs.use("/lib/bootstrap-datepicker.zh-CN.js");var codes={setNumRange:function(e,t){var o=0;if(!isNaN(e)&&!isNaN(t)){var e=Math.round(e),t=Math.round(t);return o=t-e,Math.floor(Math.random()*(o+1))+e}},getColor:function(){for(var e=Math.floor(256*Math.random()*256*256).toString(16);e.length<6;)e="0"+e;return"#"+e},getChar:function(){var e="abcdefghijklmnopqrstuvwxyz",t=Math.floor(26*Math.random());return e.charAt(t)},getNum:function(){return Math.floor(10*Math.random())},getNumRange:function(e,t){return this.setNumRange(e,t)}},codeRender={renderBG:function(e){codes.getColor()},renderLayout:function(e,t){var o=e.offsetHeight,r=e.offsetWidth;""!=getStyle(e,"borderLeftWidth")&&(o-=2,r-=2);for(var n=Math.floor(r/t),s={width:n+"px",lineHeight:o+"px",float:"left",textAlign:"center"},d=0;d<t;d++){var a=document.createElement("div");a.style.cssText=json2css(s),e.appendChild(a)}},getCodes:function(){var e="";return codes.getNumRange(0,1)?(e=codes.getChar(),codes.getNumRange(0,1)&&(e=e.toUpperCase())):e=codes.getNum(),e},renderCode:function(e){var t=codes.getColor(),o=codes.getNumRange(20,28)+"px",r=codes.getNumRange(-60,60)+"deg",n={color:t,font_size:o,"-webkit-transform":"skew("+r+")","-moz-transform":"skew("+r+")","-ms-transform":"skew("+r+")","-o-transform":"skew("+r+")"};codes.getNumRange(0,1)&&(n.fontWeight="bold"),e.style.cssText+=json2css(n)}};CheckCode.prototype.renderCode=function(){codeRender.renderBG(this.obj),codeRender.renderLayout(this.obj,this.codesLen);for(var e=this.obj.getElementsByTagName("div"),t=0;t<e.length;t++)e[t].innerHTML=codeRender.getCodes(),codeRender.renderCode(e[t])},CheckCode.prototype.render=function(){this.renderCode()},CheckCode.prototype.refresh=function(){this.obj.innerHTML="",this.renderCode()},CheckCode.prototype.getCodes=function(){for(var e="",t=this.obj.getElementsByTagName("div"),o=0;o<t.length;o++)e+=t[o].innerHTML;return e};